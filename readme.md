## Описание
Асинхронный сервер, работающий по принципам REST API, реализует обмен информацией о погоде.

Написано на Python 3.10. После запуска сервер обрабатывает запросы по адресу [http://localhost:8000](http://localhost:8000/)
### Запуск
Для запуска сервера нужно:
1. Установить зависимости:
```
pip install -r requirements.txt
```

2. Запустить script.py:
```
python script.py
```
### Эндпоинты
|эндпоинт| метод|параметры|
|-|--------:|---|
| /weather | GET|lat, lon, city, time, return |
| /city | POST| city, lat, lon |
| /cities | GET| |

### Описание параметров
|параметр|тип|описание|
|-|--------|---|
|lat|float|Географическая широта|
|lon|float|Географическая долгота|
|city|string|Название города|
|time|Строка в формате hh:mm|время в формате hh:mm|
|return|string array|Содержит перечисленные параметры погоды для метода 4. Параметры принимают значения temperature, wind_speed, humidity или precipitation

## Решение
Методы, указанные в условии к заданию, реализуются обращениями к эндпоинтам с подходящими параметрами следующим образом.

### Метод 1
Метод принимает координаты и возвращает данные о температуре, скорости ветра и атмосферном давлении на момент запроса.

Для этого сервер принимает get-запросы по адресу `/weather` с обязательными параметрами запроса `lat` и `lon`, например http://127.0.0.1:8000/weather?lat=52.45&lon=36.37 . В ответ сервер отправляет json-файл с данными о координатах, температуре, скорости ветра и давлении:
```
{
  "lat": "52.45",
  "lon": "36.37",
  "temperature": -0.1,
  "wind_speed": 10.2,
  "pressure": 1025.4
}
```

### Метод 2
Метод принимает название города и его координаты и добавляет в список городов для которых отслеживается прогноз погоды - сервер должен хранить прогноз погоды для указанных городов на текущий день и обновлять его каждые 15 минут.

Для этого метода сервер принимает post-запросы по адресу `/city` с обязательными параметрами `city`, `lat` и `lon` в теле запроса. Тело может иметь контент-тип `form-data` или `x-www-form-urlencoded`. В ответ на запрос сервер отправляет json-файл с результатом 

```
{"result": "City saved"}
```

### Метод 3
Метод возвращает список городов, для которых доступен прогноз погоды.

Для этого метода сервер принимает get-запросы по адресу `/cities` без параметров (все переданные параметры будут проигнорированы). В ответ сервер вернет json-файл с названиями и координатами городов, для которых сохранены прогнозы погоды в БД:
```
[
    {
        "city": "berlin",
        "lat": 52.52,
        "lon": 35.36
    },
    {
        "city": "tokyo",
        "lat": 35.681729,
        "lon": 139.753927
    },
    {
        "city": "moscow",
        "lat": 55.755864,
        "lon": 37.617698
    }
]
```

### Метод 4
Метод принимает название города и время и возвращает для него погоду на текущий день в указанное время, должна быть возможность выбирать какие параметры погоды получаем в ответе – температура, влажность, скорость ветра, осадки.

Для этого сервер принимает get-запросы по адресу `/weather` с обязательными параметрами запроса `city` и `time` и необязательным параметром `return`, например http://127.0.0.1:8000/weather?city=Moscow&time=11:25&return=wind_speed,humidity,precipitation . По умолчанию параметр `return` имеет значение `temperature`. В ответ сервер отправляет json-файл с данными о погоде в городе:
```
{
  "city": "moscow",
  "lat": 55.755864,
  "lon": 37.617698,
  "wind_speed": 9.69999980926514,
  "humidity": 60,
  "precipitation": 0
}
```

### Ошибки

При ошибках при обращении к серверу возвращается json-файл с указанием на ошибку и описанием причины. Например, попробуем узнать погоду для города, которого нет в базе данных:
`GET /weather?city=Paris&time=10:00`. Сервер вернет json-файл

```
{
  "error": true,
  "reason": "The city is not in the database"
}
```
